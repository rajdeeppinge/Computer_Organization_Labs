Lab9

//PROGRAM TO GENERATE FIBONACCI NUMBERS

.ORIG X10
.START X10

//TWO INITIAL FIBONACCI NUMBERS
MOV W X0 R1
MOV W X1 R2

MOV W X100 R4    //R4 STORES ADDRESS OF MEMORY LOCATION WHERE THE NUMBERS ARE STORED
MOV W XA R5    //R5 STORES THE LOOP COUNTER

LOOP: CALL FIBONACCI    //CALLS FUNCTION FIBONACCI TO GENERATE NEXT FIBONACCI NUMBER
    STORE W [R4] R3    //STORING NUMBER IN MEMORY
    ADD W X4 R4    //STORING NEXT MEMORY ADDRESS IN R4
    SUB W X1 R5    //UPDATING LOOP COUNTER
    COMP W X0 R5    //COMPARING FOR LIMITING CONDITION
    JLT LOOP   

HALT

//FUNCTION TO GENERATE FIBONACCI NUMBER
//R1: SMALLER FIBONACCI NUMBER
//R2: LARGER FIBONACCI NUMBER
//R3: NEXT FIBONACCI NUMBER
FIBONACCI: MOV W R1 R3
        ADD W R2 R3    //NEW FIBONACCI NUMBER IS GENERATED IN R3
        MOV W R2 R1    //LARGER NUMBER BECOMES SMALLER FOR NEXT STEP   
        MOV W R3 R2    //NEWLY CALCULATED NUMBER BECOMES LARGER NUMBER FOR NEXT STEP
        RET
